{% extends 'base.html' %}

{% block title %}Overall Scores{% endblock %}

{% block head %}
    
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="/static/js/sa-score.js"></script>

    <div class="container">
        <div class="row">
            <ul class="breadcrumb">
                <li class="active">States</li>
            </ul>
        </div>
    </div>
    

    <script>
        // Retrieve the jsonified Python dictionary of restaurants with AJAX
        $.get('/analysis.json', function (scoreData_dict) {
            var scoreData = scoreData_dict["scoreData"];

            // Create dashboard with id (for div element) and data
            dashboard('#dashboard',scoreData);
        });
    </script>

{% endblock %}

{% block content %}

    <div class="container">
        <div class="row">
            <div class="col-xs-12">
                <form action="/analysis/state">
                    Pick a state:
                        <select id="state" name="location" required>
                            <option value="" selected="selected">Select your option</option>

                            <optgroup label="US">
                                {% for us_location in us_locations %}
                                    <option value="{{ us_location[0] }}">{{ us_location[1] }}</option>
                                {% endfor %}
                            </optgroup>
                            
                            <optgroup label="CA">
                                {% for ca_location in ca_locations %}
                                    <option value="{{ ca_location[0] }}">{{ ca_location[1] }}</option>
                                {% endfor %}
                            </optgroup>
                        </select>
                        <input type="submit">
                <form>

                <h3>Dog Friendly Restaurants in the United States and Canada</h3>
            </div>
        </div>
    </div>

    <div class="container-fluid">
        <div class="row">
            <div class="col-xs-12">
                <div id='dashboard'></div>
            </div>
        </div>
    </div>

{% endblock %}